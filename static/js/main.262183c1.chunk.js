(this["webpackJsonpreact-samyrai"]=this["webpackJsonpreact-samyrai"]||[]).push([[2],{10:function(t,e,n){t.exports={navBarMenu:"Navbar_navBarMenu__RCt_Y",loginHeader:"Navbar_loginHeader__1sJI_",loginBlock:"Navbar_loginBlock__3SPrB",container:"Navbar_container__Hm_Pm",item:"Navbar_item__PM8mR",active:"Navbar_active__1IlwC"}},107:function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"a",(function(){return o}));var a=n(41),r=n(4),c=n(19),i=function(t){return{type:"DIALOG/SEND-MESSAGE",value:t}},s={dialogs:[{name:"nick",id:Object(c.a)()},{name:"Leks",id:Object(c.a)()},{name:"Nastya",id:Object(c.a)()},{name:"Egor",id:Object(c.a)()}],message:[{message:"\u043a\u0430\u043a \u0434\u0435\u043b\u0430",id:Object(c.a)()},{message:"\u043a\u0430\u043a \u0434\u0435\u043b\u0430",id:Object(c.a)()},{message:"\u043a\u0430\u043a \u0434\u0435\u043b\u0430",id:Object(c.a)()},{message:"\u043a\u0430\u043a \u0434\u0435\u043b\u0430",id:Object(c.a)()}]};function o(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"DIALOG/SEND-MESSAGE":var n=e.value;return Object(r.a)(Object(r.a)({},t),{},{message:[].concat(Object(a.a)(t.message),[{message:n,id:Object(c.a)()}])});default:return t}}},11:function(t,e,n){"use strict";n.d(e,"c",(function(){return c})),n.d(e,"b",(function(){return i})),n.d(e,"a",(function(){return s}));var a=n(137),r=n.n(a).a.create({withCredentials:!0,headers:{"API-KEY":"978dde1d-b974-4ee1-a942-d32857675e96"},baseURL:"https://social-network.samuraijs.com/api/1.0/"}),c={getUsers:function(t,e){return r.get("users?page=".concat(t,"&count=").concat(e)).then((function(t){return t.data}))},followApi:function(t){return r.post("follow/".concat(t))},unFollowApi:function(t){return r.delete("follow/".concat(t))},userIdAPI:function(t){return r.get("profile/"+t).then((function(t){return t.data}))}},i={updPhoto:function(t){var e=new FormData;return e.append("image",t),r.put("profile/photo",e,{headers:{"Content-Type":"multipart/form-data"}})},getStatus:function(t){return r.get("profile/status/"+t)},updateStatus:function(t){return r.put("profile/status",{status:t})},updateProfileData:function(t){return r.put("profile",t).then((function(t){return t.data}))}},s={Me:function(){return r.get("auth/me")},login:function(t){return r.post("auth/login",t)},logout:function(){return r.delete("auth/login")},captcha:function(){return r.get("security/get-captcha-url")}}},116:function(t,e,n){"use strict";n.d(e,"a",(function(){return s})),n.d(e,"c",(function(){return l})),n.d(e,"b",(function(){return d})),n.d(e,"d",(function(){return f}));var a=n(41),r=n(4),c=n(11),i={dataUsers:[],totalCount:10,currentPage:1,pageSize:10,isFetching:!1,disabledInProgressUser:[]};function s(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"USER/Follow":return Object(r.a)(Object(r.a)({},t),{},{dataUsers:t.dataUsers.map((function(t){return t.id===e.userId?Object(r.a)(Object(r.a)({},t),{},{followed:!0}):t}))});case"USER/Un-Follow":return Object(r.a)(Object(r.a)({},t),{},{dataUsers:t.dataUsers.map((function(t){return t.id===e.userId?Object(r.a)(Object(r.a)({},t),{},{followed:!1}):t}))});case"USER/Set-UsersContainerAPI":return Object(r.a)(Object(r.a)({},t),{},{dataUsers:e.users});case"USER/CURRENT-PAGES":return Object(r.a)(Object(r.a)({},t),{},{currentPage:e.pageNumberCurrent});case"USER/TOTAL-USER-COUNT":return Object(r.a)(Object(r.a)({},t),{},{totalCount:e.totalCount});case"USER/Toggle is fetching":return Object(r.a)(Object(r.a)({},t),{},{isFetching:e.isFetching});case"USER/TOGGLE-DISABLED-BUTTON-USER":return Object(r.a)(Object(r.a)({},t),{},{disabledInProgressUser:e.disFetching?[].concat(Object(a.a)(t.disabledInProgressUser),[e.idUser]):[t.disabledInProgressUser.filter((function(t){return t!==e.idUser}))]});default:return t}}var o=function(t,e){return{type:"USER/TOGGLE-DISABLED-BUTTON-USER",disFetching:t,idUser:e}},u=function(t){return{type:"USER/Toggle is fetching",isFetching:t}},l=function(t,e){return function(n){n(u(!0)),c.c.getUsers(t,e).then((function(e){n(u(!1)),n({type:"USER/Set-UsersContainerAPI",users:e.items}),n({type:"USER/TOTAL-USER-COUNT",totalCount:e.totalCount}),n({type:"USER/CURRENT-PAGES",pageNumberCurrent:t})}))}},d=function(t){return function(e){e(o(!0,t)),c.c.followApi(t).then((function(n){0===n.data.resultCode&&e({type:"USER/Follow",userId:t}),e(o(!1,t))}))}},f=function(t){return function(e){e(o(!0,t)),c.c.unFollowApi(t).then((function(n){0===n.data.resultCode&&e({type:"USER/Un-Follow",userId:t}),e(o(!1,t))}))}}},187:function(t,e,n){},307:function(t,e,n){"use strict";n.r(e);var a=n(24),r=n.n(a),c=n(0),i=n.n(c),s=function(t){t&&t instanceof Function&&n.e(10).then(n.bind(null,391)).then((function(e){var n=e.getCLS,a=e.getFID,r=e.getFCP,c=e.getLCP,i=e.getTTFB;n(t),a(t),r(t),c(t),i(t)}))},o=n(90),u=n(91),l=n(94),d=n(93),f=(n(187),n(8)),b=n(18),j=n(28),p=n(42),O=n(107),h=n(99),g=n(116),v=n(38),m={friendsPage:[{img:"https://mir-avatarok.3dn.ru/_si/0/92302704.jpg",name:"Nastya",alt:"qwq",id:1},{img:"https://mir-avatarok.3dn.ru/_si/0/92302704.jpg",name:"Vivaldi",alt:"qwzxq",id:2},{img:"https://mir-avatarok.3dn.ru/_si/0/92302704.jpg",name:"Nana",alt:"qwe",id:3}]},E=n(138),U=n(134),S=n(4),x={initialized:!1};var P=Object(p.b)({dialogs:O.a,profile:h.a,sideBar:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m;return t},usersData:g.a,authMe:v.a,form:U.a,appReducer:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"APP/SET-INITIALIZED":return Object(S.a)(Object(S.a)({},t),{},{initialized:!0});default:return t}}}),T=Object(p.d)(P,Object(p.a)(E.a));window.store=T;var R=T,A=n(10),I=n.n(A),w=n(77),y=n.n(w),C=n(89),N=n(3),L=function(t){var e=Object(j.d)((function(t){return t.authMe})),n=Object(j.d)((function(t){var e,n,a;return null===(e=t.profile)||void 0===e||null===(n=e.profileUsers)||void 0===n||null===(a=n.photos)||void 0===a?void 0:a.small})),a=Object(j.c)();return Object(N.jsxs)("div",{className:I.a.container,children:[e.isAuth?Object(N.jsxs)("div",{className:I.a.loginBlock,children:[Object(N.jsx)("span",{children:e.login}),Object(N.jsx)(b.b,{to:"/profile",children:Object(N.jsx)("img",{src:n||C.a,alt:"121"})}),Object(N.jsx)("div",{children:Object(N.jsx)(y.a,{variant:"contained",size:"small",color:"secondary",onClick:function(){a(Object(v.d)())},children:"Logout"})})]}):Object(N.jsx)("div",{children:Object(N.jsx)(y.a,{variant:"contained",size:"small",color:"secondary",onClick:function(){return Object(N.jsx)(f.a,{to:"login"})},children:"Login"})}),Object(N.jsxs)("div",{className:I.a.navBarMenu,children:[Object(N.jsx)("div",{className:"".concat(I.a.item),children:Object(N.jsx)(b.b,{activeClassName:I.a.active,to:"/profile",children:"Profile"})}),Object(N.jsx)("div",{className:"".concat(I.a.item),children:Object(N.jsx)(b.b,{activeClassName:I.a.active,to:"/dialogs",children:"Messege"})}),Object(N.jsx)("div",{className:I.a.item+" "+I.a.setting,children:Object(N.jsx)(b.b,{activeClassName:I.a.active,to:"/users",children:"Users"})}),Object(N.jsx)("div",{className:I.a.item,children:Object(N.jsx)(b.b,{activeClassName:I.a.active,to:"/news",children:"News"})}),Object(N.jsx)("div",{className:I.a.item,children:Object(N.jsx)(b.b,{activeClassName:I.a.active,to:"/musick",children:"Musick"})}),Object(N.jsx)("div",{className:I.a.item+" "+I.a.setting,children:Object(N.jsx)(b.b,{activeClassName:I.a.active,to:"/setting",children:"Setting"})})]})]})},F=function(t){return Object(N.jsx)("div",{})},k=n(60),D=n.n(k),_=function(t){return Object(N.jsx)("div",{style:{position:"relative",left:"50%"},children:Object(N.jsx)(D.a,{})})},z=i.a.lazy((function(){return Promise.all([n.e(0),n.e(6)]).then(n.bind(null,399))})),M=i.a.lazy((function(){return n.e(7).then(n.bind(null,401))})),B=i.a.lazy((function(){return Promise.all([n.e(0),n.e(1),n.e(5)]).then(n.bind(null,400))})),G=i.a.lazy((function(){return n.e(9).then(n.bind(null,397))})),H=i.a.lazy((function(){return Promise.all([n.e(0),n.e(1),n.e(8)]).then(n.bind(null,403))})),q=function(t){Object(l.a)(n,t);var e=Object(d.a)(n);function n(){var t;Object(o.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(t=e.call.apply(e,[this].concat(r))).catchAllErrors=function(){alert("Errors Global")},t}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.props.initializeAppThunk(),window.addEventListener("unhandledrejection",this.catchAllErrors)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("unhandledrejection",this.catchAllErrors)}},{key:"render",value:function(){return this.props.initialized?Object(N.jsxs)("div",{className:"app-wrapper",children:[Object(N.jsx)(L,{}),Object(N.jsx)("div",{className:"app-wrapper-content",children:Object(N.jsx)(i.a.Suspense,{fallback:Object(N.jsx)(D.a,{}),children:Object(N.jsxs)(f.d,{children:[Object(N.jsx)(f.b,{exact:!0,path:"/",render:function(){return Object(N.jsx)(f.a,{to:"/profile"})}}),Object(N.jsx)(f.b,{path:"/profile/:userId?",component:B}),Object(N.jsx)(f.b,{path:"/dialogs",component:z}),Object(N.jsx)(f.b,{path:"/users",component:M}),Object(N.jsx)(f.b,{path:"/login",component:H}),Object(N.jsx)(f.b,{path:"/musick",component:G}),Object(N.jsx)(f.b,{path:"*",render:function(){return Object(N.jsx)("div",{children:"404 not found"})}})]})})}),Object(N.jsx)(F,{})]}):Object(N.jsx)(_,{})}}]),n}(i.a.Component),J=Object(p.c)(Object(j.b)((function(t){return{initialized:t.appReducer.initialized}}),{initializeAppThunk:function(){return function(t){var e=t(Object(v.b)());Promise.all([e]).then((function(){t({type:"APP/SET-INITIALIZED"})}))}}}),f.g)(q),Y=function(){return Object(N.jsx)(b.a,{children:Object(N.jsx)(j.a,{store:R,children:Object(N.jsx)(J,{})})})};r.a.render(Object(N.jsx)(Y,{}),document.getElementById("root")),s()},38:function(t,e,n){"use strict";n.d(e,"a",(function(){return s})),n.d(e,"b",(function(){return u})),n.d(e,"c",(function(){return l})),n.d(e,"d",(function(){return f}));var a=n(4),r=n(11),c=n(81),i={id:null,email:null,login:null,captcha:null,isAuth:!1};function s(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"AUTH/SET-USER-DATA":return Object(a.a)(Object(a.a)({},t),e.payload);case"AUTH/GET-CAPTCHA-URL":return Object(a.a)(Object(a.a)({},t),{},{captcha:e.url});default:return t}}var o=function(t,e,n,a){return{type:"AUTH/SET-USER-DATA",payload:{id:t,email:e,login:n,isAuth:a}}},u=function(){return function(t){return r.a.Me().then((function(e){0===e.data.resultCode&&t(o(e.data.data.id,e.data.data.email,e.data.data.login,!0))}))}},l=function(t){return function(e){r.a.login(t).then((function(t){if(0===t.data.resultCode)e(u());else{if(10!==t.data.resultCode){var n=t.data.messages.length>0?t.data.messages[0]:"some error";return e(Object(c.a)("login",{_error:n}))}e(d())}}))}},d=function(){return function(t){r.a.captcha().then((function(e){t({type:"AUTH/GET-CAPTCHA-URL",url:e.data.url})}))}},f=function(){return function(t){r.a.logout().then((function(e){0===e.data.resultCode&&t(o(null,null,null,!1))}))}}},89:function(t,e,n){"use strict";e.a=n.p+"static/media/user.a6143582.png"},99:function(t,e,n){"use strict";n.d(e,"a",(function(){return d})),n.d(e,"b",(function(){return f})),n.d(e,"c",(function(){return j})),n.d(e,"e",(function(){return p})),n.d(e,"f",(function(){return O})),n.d(e,"d",(function(){return h})),n.d(e,"h",(function(){return g})),n.d(e,"g",(function(){return v}));var a=n(35),r=n.n(a),c=n(68),i=n(41),s=n(4),o=n(11),u=n(19),l={postData:[{id:"1",message:"hello how are you",likesCount:12,img:""}],profileUsers:null,status:""};function d(){var t,e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"PROFILE/ADD-POST":var r={id:Object(u.a)(),message:a.newMessage,likesCount:0,img:null===(t=n.profileUsers)||void 0===t||null===(e=t.photos)||void 0===e?void 0:e.small};return Object(s.a)(Object(s.a)({},n),{},{postData:[r].concat(Object(i.a)(n.postData))});case"PROFILE/SET-PROFILE-USER":return Object(s.a)(Object(s.a)({},n),{},{profileUsers:a.profile});case"PROFILE/SET-PROFILE-STATUS":return Object(s.a)(Object(s.a)({},n),{},{status:a.status});case"PROFILE/DEL-POST-PROFILE":return Object(s.a)(Object(s.a)({},n),{},{postData:n.postData.filter((function(t){return t.id!==a.id}))});case"PROFILE/UPDATE-PHOTO-USER":return Object(s.a)(Object(s.a)({},n),{},{profileUsers:Object(s.a)(Object(s.a)({},n.profileUsers),{},{photos:a.photos})});default:return n}}var f=function(t){return{type:"PROFILE/ADD-POST",newMessage:t}},b=function(t){return{type:"PROFILE/SET-PROFILE-STATUS",status:t}},j=function(t){return{type:"PROFILE/DEL-POST-PROFILE",id:t}},p=function(t){return function(){var e=Object(c.a)(r.a.mark((function e(n){var a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.c.userIdAPI(t);case 2:a=e.sent,n({type:"PROFILE/SET-PROFILE-USER",profile:a});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},O=function(t){return function(){var e=Object(c.a)(r.a.mark((function e(n,a){var c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=a().authMe.id,e.next=3,o.b.updateProfileData(t);case 3:if(0!==e.sent.resultCode){e.next=12;break}if(null==c){e.next=9;break}n(p(c)),e.next=10;break;case 9:throw new Error("userId can't be null");case 10:e.next=13;break;case 12:alert("error upd user");case 13:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},h=function(t){return function(e){o.b.getStatus(t).then((function(t){e(b(t.data))})).catch((function(){alert("err status")}))}},g=function(t){return function(e){o.b.updateStatus(t).then((function(n){0===n.data.resultCode&&e(b(t))}))}},v=function(t){return function(){var e=Object(c.a)(r.a.mark((function e(n){var a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.b.updPhoto(t);case 2:0===(a=e.sent).data.resultCode?n({type:"PROFILE/UPDATE-PHOTO-USER",photos:a.data.data.photos}):alert(a.data.messages);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}},[[307,3,4]]]);
//# sourceMappingURL=main.262183c1.chunk.js.map